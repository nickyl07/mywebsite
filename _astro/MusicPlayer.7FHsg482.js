import{d as _,c as m,a as l,b as h,n as p,w as k,t as b,v as S,e as M,o as P,r,f as C,g as x}from"./runtime-dom.esm-bundler.b_6IjDMo.js";const H=(i,t)=>{const o=i.__vccOpts||i;for(const[e,u]of t)o[e]=u;return o},V=_({__name:"MusicPlayer",props:{songs:{}},setup(i,{expose:t}){t();const o=i,e=r(!1),u=r(!1),n=r(null),a=r(0),d=r(.3),s=r(!1),v=async()=>{if(!(!n.value||s.value)){s.value=!0;try{e.value?(n.value.pause(),e.value=!1):(await n.value.play(),e.value=!0)}catch(c){console.warn("自动播放受限:",c)}finally{s.value=!1}}},g=async()=>{s.value||(s.value=!0,a.value=(a.value+1)%o.songs.length,setTimeout(async()=>{try{n.value&&(n.value.volume=d.value,await n.value.play(),e.value=!0)}finally{s.value=!1}},100))},w=()=>{n.value&&(n.value.volume=d.value)};P(()=>{if(o.songs.length>0){a.value=Math.floor(Math.random()*o.songs.length);const c=()=>{v(),window.removeEventListener("click",c)};window.addEventListener("click",c)}});const y=C(()=>o.songs[a.value]||null),f={props:o,isPlaying:e,isHovered:u,audioRef:n,currentSongIndex:a,volume:d,isLock:s,togglePlay:v,nextSong:g,updateVolume:w,currentSong:y};return Object.defineProperty(f,"__isScriptSetup",{enumerable:!1,value:!0}),f}}),E=["src"],j={key:0,class:"flex items-center ml-4 gap-4 overflow-hidden animate-fade-in animate-duration-300"},z={class:"flex flex-col min-w-0 flex-1"},B={class:"text-xs font-bold truncate max-w-30"},I={class:"flex gap-3"};function L(i,t,o,e,u,n){return x(),m("div",{class:p(["fixed bottom-10 left-10 z-[100] transition-all duration-500 ease-in-out flex items-center bg-white/90 dark:bg-zinc-800/90 backdrop-blur-md border border-base shadow-lg overflow-hidden",e.isHovered?"rounded-2xl px-4 py-2 max-w-[400px]":"rounded-full w-12 h-12 justify-center"]),onMouseenter:t[1]||(t[1]=a=>e.isHovered=!0),onMouseleave:t[2]||(t[2]=a=>e.isHovered=!1)},[l("audio",{ref:"audioRef",src:e.currentSong?.url,onEnded:e.nextSong,preload:"auto"},null,40,E),l("div",{class:"flex-shrink-0 flex items-center justify-center cursor-pointer transition-transform active:scale-90",onClick:e.togglePlay},[l("div",{class:p(["i-ph-music-notes-fill text-xl text-black dark:text-white",{"animate-pulse":e.isPlaying}])},null,2)]),e.isHovered?(x(),m("div",j,[l("div",z,[l("span",B,b(e.currentSong?.name),1),k(l("input",{type:"range",min:"0",max:"1",step:"0.01","onUpdate:modelValue":t[0]||(t[0]=a=>e.volume=a),onInput:e.updateVolume,class:"w-20 h-1 mt-1 accent-black dark:accent-white cursor-pointer"},null,544),[[S,e.volume]])]),l("div",I,[l("button",{onClick:M(e.nextSong,["stop"]),class:"hover:text-orange-500 transition-colors"},[...t[3]||(t[3]=[l("div",{class:"i-ph-skip-forward-fill text-lg text-black dark:text-white"},null,-1)])])])])):h("",!0)],34)}const N=H(V,[["render",L],["__scopeId","data-v-ef9455f9"]]);export{N as default};
